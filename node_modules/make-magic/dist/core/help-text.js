"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.printHelp=void 0;const chalk_1=__importDefault(require("../compiled/chalk")),decamelize_1=__importDefault(require("../compiled/decamelize")),wrap_ansi_1=__importDefault(require("../compiled/wrap-ansi")),config_1=require("./config"),scaffold_helpers_1=require("./utils/scaffold-helpers"),styled={Usage:chalk_1.default.bold.inverse(" USAGE "),Options:chalk_1.default.bold.inverse(" OPTIONS "),Examples:chalk_1.default.bold.inverse(" EXAMPLES "),sh:chalk_1.default.gray.dim("$"),bin:chalk_1.default.green(config_1.BINARY)};function printHelp(e,t){const a=[];a.push(createHelpSection({heading:styled.Usage,content:`  ${styled.sh} ${styled.bin} [options]`})),a.push(createHelpSection({heading:styled.Options,content:createOptionsTable(Object.assign(Object.assign({},e),{"[...]":chalk_1.default`Additional CLI flags are given as data to the chosen template. Data provided as CLI flags will {italic not be prompted for interactively.}`}))}));try{const{flags:e}=scaffold_helpers_1.getScaffoldDefinition(t);a.push(createHelpSection({heading:styled.Options+chalk_1.default.bold(" â¯ ")+chalk_1.default.bold.hex("#b93fff").inverse(` ${t} `),content:createOptionsTable(e)}))}catch(e){}a.push(createHelpSection({heading:styled.Examples,content:[`  ${styled.sh} npx ${styled.bin}`,`  ${styled.sh} npx ${styled.bin} --version`,`  ${styled.sh} npx ${styled.bin} --template=hello-world`,`  ${styled.sh} npx ${styled.bin} --project-name=my-app`].join("\n")})),console.log(a.join("\n\n"))}function createHelpSection(e){return`${e.heading}\n\n${e.content}`}function createOptionsTable(e){const t=(e,t)=>e.startsWith("-")||e.startsWith("[")?e:(null==t?void 0:t.alias)?`--${decamelize_1.default(e,{separator:"-"})}, -${null==t?void 0:t.alias}`:`--${decamelize_1.default(e,{separator:"-"})}`,a=Object.entries(e).map((([e,a])=>{const l="string"==typeof a?a:a.description+getDefaultArgLabel(a);return[`  ${t(e,"string"==typeof a?void 0:a)}`,l]})),l=Math.max(...a.map((([e])=>e.length))),n=a.map((([e,t])=>formatDescription(t,77,l+3)));return a.map((([e],t)=>[e,n[t]].join(" ".repeat(l-e.length+3)))).join("\n\n")}function getDefaultArgLabel(e){const t=Array.isArray(e.default)?typeof e.default[0]:typeof e.default,a=Array.isArray(e.default)?`[${e.default.map(JSON.stringify).join(", ")}]`:JSON.stringify(e.default);switch(t){case"string":case"number":case"boolean":return chalk_1.default` {dim Default: {yellow ${a}}}`;case"function":return chalk_1.default` {dim Default: {yellow.italic auto-generated at runtime}}`;default:return""}}function formatDescription(e,t,a){return wrap_ansi_1.default(e,t-a).split("\n").join(`\n${" ".repeat(a)}`)}exports.printHelp=printHelp;